#!/bin/sh
# Pre-commit hook â€” runs typecheck, tests, and build before allowing a commit.

echo "ğŸ” Running pre-commit checks..."

echo "  â†’ Type-checking..."
bunx tsc --noEmit
if [ $? -ne 0 ]; then
  echo "âœ— Typecheck failed. Fix errors before committing."
  exit 1
fi

echo "  â†’ Running tests..."
bun test
if [ $? -ne 0 ]; then
  echo "âœ— Tests failed. Fix failures before committing."
  exit 1
fi

echo "  â†’ Building..."
bun run build
if [ $? -ne 0 ]; then
  echo "âœ— Build failed. Fix errors before committing."
  exit 1
fi

echo "âœ“ All pre-commit checks passed."
